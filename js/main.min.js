var colorPalette=document.querySelectorAll(".palette .color"),colorNames=document.querySelectorAll(".code .name"),colorCodes=document.querySelectorAll(".code .number"),imgPreview=document.getElementById("previewImg"),preview=document.getElementsByClassName("preview")[0],autoGeneration=0,isNumber=function(e){return"number"==typeof e&&isFinite(e)},isString=function(e){return"string"==typeof e||e instanceof String},componentToHex=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},rgbToHex=function(e,t,o){return"#"+componentToHex(e)+componentToHex(t)+componentToHex(o)},createLoadingIcon=function(){var e=document.createElement("div"),t=document.getElementsByClassName("pie-wrap")[0];return slice1=document.createElement("div"),slice2=document.createElement("div"),t&&t.parentNode.removeChild(t),slice1.className="slice1",slice2.className="slice2",slice1.classList.add("slice-wrap"),slice2.classList.add("slice-wrap"),e.className="pie-wrap",e.appendChild(slice1),e.appendChild(slice2),preview.insertBefore(e,preview.firstChild),e},getHexCode=function(e){var t=e[0],o="";return isNumber(t)?o=rgbToHex(e[0],e[1],e[2]):isString(t)&&(o="#"+e),o.toUpperCase()},changePaletteColor=function(e){for(var t=0;t<colorPalette.length;++t){var o=colorPalette[t],n=e[t],r=getHexCode(n),a=ntc.name(r)[1];o.style.setProperty("--color",r),colorCodes[t].innerHTML=r,colorNames[t].innerHTML=a}},getHexCodeFromImage=function(e){const t=new ColorThief;var o=[];e.complete?(o=t.getPalette(e,4,1),changePaletteColor(o)):e.addEventListener("load",function(){o=t.getPalette(e,4,1),changePaletteColor(o),createLoadingIcon()})},generateRandomPaletteFromImg=function(){imgPreview.src="https://picsum.photos/600/450?"+performance.now(),getHexCodeFromImage(imgPreview)},generateRandomly=function(){clearInterval(autoGeneration),generateRandomPaletteFromImg(),autoGeneration=setInterval(()=>generateRandomPaletteFromImg(),3e3)},addCopyAction=function(e){var t=document.createElement("input"),o=e.style.getPropertyValue("--color");t.value=o,t.name="color",e.appendChild(t),e.parentNode.querySelector('input[name="color"]').select(),document.execCommand("copy"),t.parentNode.removeChild(t)},addCopiedText=function(e){if("SPAN"===e.nodeName){var t=document.createElement("i");t.innerHTML="Copied!",e.appendChild(t),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>{t.parentNode.removeChild(t)},1e3)},500)}},addCopiedEventListener=function(){Array.from(colorPalette).forEach(e=>{e.addEventListener("click",e=>{var t=e.target;clearInterval(autoGeneration),addCopyAction(t),addCopiedText(t)})})},uploadImgUrl=function(e){e.preventDefault(),clearInterval(autoGeneration),imgPreview.classList.remove("blur"),imgPreview.src=URL.createObjectURL(e.target.files[0]),getHexCodeFromImage(imgPreview)};generateRandomPaletteFromImg(),addCopiedEventListener();